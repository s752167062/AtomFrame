{"version":3,"sources":["MapController.js"],"names":["cc","Class","extends","Component","properties","TAG","Level","step","Map","BaseStepNum","ctor","console","log","onLoad","onDestory","makeSteps","stepnumber","stepList","i","item","step_type","aiStepType","makeStepNodes","index_tag","stepList_data","stepNodeList","length","node","Atom","prefMgr","getPrefabObj","Prefab","setTag","stepScript","getComponent","setStepData","searchSavePath"],"mappings":";;;;;;AAAA;AACAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,aAAK,eADG;AAERC,eAAM,CAFE,EAEE;AACVC,cAAK,CAHG,EAGE;AACVC,aAAI,EAJI,EAIG;;AAEXC,qBAAY;AANJ,KAHP;;AAYLC,UAAK,gBAAW;AACZC,gBAAQC,GAAR,CAAY,UAAU,KAAKP,GAA3B;AACH,KAdI;;AAgBLQ,YAAO,kBAAU;AACbF,gBAAQC,GAAR,CAAY,WAAW,KAAKP,GAA5B;AACH,KAlBI;;AAoBLS,eAAU,qBAAU;AAChBH,gBAAQC,GAAR,CAAY,cAAc,KAAKP,GAA/B;AACH,KAtBI;;AAwBL;AACAU,eAAU,qBAAU;AAChBR,gBAAQ,CAAR;AACA,YAAIS,aAAcT,OAAK,CAAL,IAAU,CAAX,GAAcE,WAAd,GAA6BA,cAAY,CAA1D;AACA,YAAIQ,WAAW,EAAf;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIF,UAApB,EAAgCE,GAAhC,EAAqC;AACjC,gBAAIC,OAAO,EAAX;AACAA,iBAAKC,SAAL,GAAkBC,YAAlB;AACAF,iBAAKH,UAAL,GAAkBA,UAAlB,CAHiC,CAGJ;AAC7BC,qBAASC,CAAT,IAAcC,IAAd;AACH;AACD,eAAOF,QAAP;AACH,KApCI;AAqCLI,gBAAY,sBAAU;AAClB;AACA,eAAO,MAAP;AACH,KAxCI;;AA0CL;AACA;AACAC,mBAAc,uBAASC,SAAT,EAAmB;AAC7B,YAAIC,gBAAgBT,WAApB;AACA,YAAIU,eAAgB,EAApB;AACA,aAAK,IAAIP,IAAI,CAAb,EAAgBA,IAAIM,cAAcE,MAAlC,EAA0CR,GAA1C,EAA+C;AAC3C,gBAAIC,OAAOK,cAAcN,CAAd,CAAX;AACA,gBAAIS,OAAO3B,GAAG4B,IAAH,CAAQC,OAAR,CAAgBC,YAAhB,CAA6B,OAA7B,CAAX,CAF2C,CAEO;AAClD;AACA,gBAAGH,gBAAgB3B,GAAG+B,MAAtB,EAA6B;AACzBJ,qBAAKK,MAAL,CAAYT,YAAYL,CAAxB;AACA;AACA,oBAAIe,aAAaN,KAAKO,YAAL,CAAkB,YAAlB,CAAjB;AACAD,4BAAWE,YAAYhB,IAAZ;AACXM,6BAAaP,CAAb,IAAkBC,IAAlB;AACH,aAND,MAMK;AACDR,wBAAQC,GAAR,CAAY,qDAAZ;AACH;AAEJ;AACD,eAAOa,YAAP;AACH,KA/DI;;AAiEL;AACA;AACAW,oBAAe,wBAASV,MAAT,EAAgB,CAE9B;;AAED;AAvEK,CAAT","file":"MapController.js","sourceRoot":"../../../../../assets/JJGame/Script","sourcesContent":["//MapController 只负责数据的生成，不包含节点\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        TAG: \"MapController\",\n        Level:1 , //难度等级\n        step:0,   //第几阶\n        Map:[],    //阶梯地图数据\n\n        BaseStepNum:8\n    },\n\n    ctor:function() {\n        console.log(\"-new:\" + this.TAG);\n    },\n\n    onLoad:function(){\n        console.log(\"-load:\" + this.TAG);\n    },\n\n    onDestory:function(){\n        console.log(\"-destory:\" + this.TAG);\n    },\n\n    //生成位置数据\n    makeSteps:function(){\n        step += 1;\n        var stepnumber = (step%2 == 0)?BaseStepNum : (BaseStepNum+1);\n        var stepList = [];\n        for (var i = 0; i < stepnumber; i++) {\n            var item = {};\n            item.step_type  = aiStepType(); \n            item.stepnumber = stepnumber;//本阶的砖块数量\n            stepList[i] = item;\n        }\n        return stepList;\n    },\n    aiStepType :function(){\n        //ai 运算是什么类型  base , empy , trap , buff\n        return \"base\";\n    },\n\n    //生成位置节点\n    //index_tag 新一行的起始tag \n    makeStepNodes:function(index_tag){\n        var stepList_data = makeSteps();\n        var stepNodeList  = [];\n        for (var i = 0; i < stepList_data.length; i++) {\n            var item = stepList_data[i];\n            var node = cc.Atom.prefMgr.getPrefabObj(\"brick\"); //创建一个砖块 prefab节点\n            //预设对象才处理\n            if(node instanceof cc.Prefab){\n                node.setTag(index_tag + i);\n                //获取预制资源中的js组件，并作出相应操作\n                var stepScript = node.getComponent('stepScript');\n                stepScript:setStepData(item);\n                stepNodeList[i] = item;\n            }else{\n                console.log(\">>>> ERR makeStepNodes node not a prefab object !!!\")\n            }\n\n        } \n        return stepNodeList;\n    },\n\n    //寻找安全路径\n    //length 安全阶数\n    searchSavePath:function(length){\n\n    }\n    \n    //获取下一个阶\n});\n"]}