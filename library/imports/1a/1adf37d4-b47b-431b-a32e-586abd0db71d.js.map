{"version":3,"sources":["../../../../../../assets/Script/AtomFrame/ScriptBase/assets/Script/AtomFrame/ScriptBase/BonesBase.js"],"names":["cc","Class","extends","Component","properties","TAG","DefaultAni","onLoad","_armatureDisPlay","getComponent","dragonBones","ArmatureDisplay","_armature","armature","addEventListener","EventObject","FADE_IN_COMPLETE","animationEventHandler","FADE_OUT_COMPLETE","COMPLETE","ANIMATION_FRAME_EVENT","BONE_FRAME_EVENT","FRAME_EVENT","LOOP_COMPLETE","event","events","type","console","log","detail","animationName","onFadeInComplete","onFadeOutComplete","onAniComplete","onAniFrameEvent","onBoneFrameEvent","onFrameEvent","onLoopComplete","playAnimation","name","playtimes","length"],"mappings":"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","file":"BonesBase.js","sourceRoot":"../../../../../../assets/Script/AtomFrame/ScriptBase","sourcesContent":["\n//（龙骨 DragonBones）骨骼动画的基础类，相关骨骼动画对象可以绑定这个基础脚本 / 绑定的基础脚本继承此脚本并扩展单独的接口\n// cocos 官网无法查找到相关API 时移步 http://developer.egret.com/cn/apidoc/index/name/dragonBones 参考相关API 或看源码\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        TAG : \"BonesBase\",\n        DefaultAni : null, //默认一开始执行的动画\n    },\n\n    onLoad:function(){\n        //获取 ArmatureDisplay 组件\n        this._armatureDisPlay = this.getComponent(dragonBones.ArmatureDisplay)\n        //获取 Armatrue\n        this._armature = this._armatureDisPlay.armature()\n\n        //添加动画监听\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.FADE_IN_COMPLETE , this.animationEventHandler, this)      \n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.FADE_OUT_COMPLETE, this.animationEventHandler, this)\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.COMPLETE         , this.animationEventHandler, this)\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.ANIMATION_FRAME_EVENT, this.animationEventHandler, this)\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.BONE_FRAME_EVENT , this.animationEventHandler, this)\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.FRAME_EVENT      , this.animationEventHandler, this)\n        this._armatureDisPlay.addEventListener(dragonBones.EventObject.LOOP_COMPLETE    , this.animationEventHandler, this)\n    },\n\n    //动画事件\n    animationEventHandler:function(event){\n        if(events.type == dragonBones.EventObject.FADE_IN_COMPLETE){\n            console.log(\" FADE_IN_COMPLETE \", event.detail.animationName)\n            this.onFadeInComplete(events);\n        }\n        else if(events.type == dragonBones.EventObject.FADE_OUT_COMPLETE){\n            console.log(\" FADE_OUT_COMPLETE \", event.detail.animationName)\n            this.onFadeOutComplete(events);\n        }\n        else if(events.type == dragonBones.EventObject.COMPLETE){\n            console.log(\" COMPLETE \", event.detail.animationName)\n            this.onAniComplete(events);\n        }\n        else if(events.type == dragonBones.EventObject.ANIMATION_FRAME_EVENT){\n            console.log(\" ANIMATION_FRAME_EVENT \", event.detail.animationName)\n            this.onAniFrameEvent(events);\n        }\n        else if(events.type == dragonBones.EventObject.BONE_FRAME_EVENT){\n            console.log(\" BONE_FRAME_EVENT \", event.detail.animationName)\n            this.onBoneFrameEvent(events);\n        }\n        else if(events.type == dragonBones.EventObject.FRAME_EVENT){\n            console.log(\" FRAME_EVENT \", event.detail.animationName)\n            this.onFrameEvent(events);\n        }\n        else if(events.type == dragonBones.EventObject.LOOP_COMPLETE){\n            console.log(\" LOOP_COMPLETE \", event.detail.animationName)\n            this.onLoopComplete(events);\n        }\n    },\n    onAniComplete:function(events){\n\n    },\n    onFadeInComplete:function(events){\n\n    },\n    onFadeOutComplete:function(events){\n        \n    },\n    onAniFrameEvent:function(events){\n        \n    },\n    onBoneFrameEvent:function(events){\n        \n    },\n    onFrameEvent:function(events){\n        \n    },\n    onLoopComplete:function(events){\n        \n    },\n\n\n    // playAnimationFadeIn:function(name , arg0, arg1, arg2, arg3){\n    //     this._armature.animation.fadeIn('attack1', -1, -1, 0, 'hit');\n    // },\n\n    //name 指定播放动画的名称。 playtimes 指定播放动画的次数。 -1 为使用配置文件中的次数。 0 为无限循环播放\n    playAnimation:function(name , playtimes){\n        if(name == null && name.length == 0){\n            console.log(\" ### BonesBase playAnimation name null !!!\");\n            return\n        }\n        if(playtimes == null){\n            playtimes = -1 ;\n        }\n        \n        this._armatureDisPlay.playAnimation(name , playtimes);\n    },\n\n\n});\n"]}