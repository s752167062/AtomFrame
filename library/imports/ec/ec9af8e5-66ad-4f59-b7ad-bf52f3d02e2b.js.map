{"version":3,"sources":["../../../../../assets/Script/AtomFrame/assets/Script/AtomFrame/md5.js"],"names":["crypto","require","fs","cc","sys","os","OS_ANDROID","OS_IOS","Class","extends","Component","properties","TAG","ctor","console","log","md5","createHash","onLoad","onDestroy","md5File","path","statSync","isFile","update","readFileSync","digest","md5Str","data"],"mappings":";;;;;;AAAA;;;;AAIA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,EAAJ;AACA,IAAGC,GAAGC,GAAH,CAAOC,EAAP,IAAaF,GAAGC,GAAH,CAAOE,UAApB,IAAkCH,GAAGC,GAAH,CAAOC,EAAP,IAAaF,GAAGC,GAAH,CAAOG,MAAzD,EAAgE;AAC5DL,SAAKD,QAAQ,IAAR,CAAL;AACH;;AAEDE,GAAGK,KAAH,CAAS;AACLC,aAASN,GAAGO,SADP;;AAGLC,gBAAY;AACRC,aAAK;AADG,KAHP;;AAOLC,UAAM,gBAAY;AACdC,gBAAQC,GAAR,CAAY,UAAU,KAAKH,GAA3B;AACA,aAAKI,GAAL,GAAWhB,OAAOiB,UAAP,CAAkB,KAAlB,CAAX;AACH,KAVI;;AAYLC,YAAQ,kBAAY;AAChBJ,gBAAQC,GAAR,CAAY,WAAW,KAAKH,GAA5B;AACH,KAdI;;AAgBLO,eAAW,qBAAY;AACnBL,gBAAQC,GAAR,CAAY,cAAc,KAAKH,GAA/B;AACH,KAlBI;;AAoBL;;;AAGAQ,aAAS,iBAAUC,IAAV,EAAgB;AACrB,YAAGlB,GAAGC,GAAH,CAAOC,EAAP,IAAaF,GAAGC,GAAH,CAAOE,UAApB,IAAkCH,GAAGC,GAAH,CAAOC,EAAP,IAAaF,GAAGC,GAAH,CAAOG,MAAzD,EAAgE;AAC5D,gBAAG,CAACL,GAAGoB,QAAH,CAAYD,IAAZ,EAAkBE,MAAlB,EAAJ,EAA+B;AAC3B,uBAAO,IAAP;AACH;AACD,mBAAO,KAAKP,GAAL,CAASQ,MAAT,CAAgBtB,GAAGuB,YAAH,CAAgBJ,IAAhB,EAAuB,OAAvB,CAAhB,EAAiDK,MAAjD,CAAwD,KAAxD,CAAP;AACH;AACD,eAAO,IAAP;AACH,KA/BI;;AAiCL;;;AAGAC,YAAQ,gBAAUC,IAAV,EAAgB;AACpB,eAAO,KAAKZ,GAAL,CAASQ,MAAT,CAAgBI,IAAhB,EAAsBF,MAAtB,CAA6B,KAA7B,CAAP;AACH;;AAtCI,CAAT","file":"md5.js","sourceRoot":"../../../../../assets/Script/AtomFrame","sourcesContent":["/**\n    cocos creator 中自带的fs模块为 c++ node.js \n*/\n\nvar crypto = require(\"crypto\");\nvar fs;\nif(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\n    fs = require(\"fs\")\n}\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        TAG: \"md5\",\n    },\n\n    ctor: function () {\n        console.log(\"-new:\" + this.TAG);\n        this.md5 = crypto.createHash(\"md5\");\n    },\n\n    onLoad: function () {\n        console.log(\"-load:\" + this.TAG);\n    },\n\n    onDestroy: function () {\n        console.log(\"-destory:\" + this.TAG);\n    },\n\n    /**\n     * 文件的MD5\n     */\n    md5File: function (path) {\n        if(cc.sys.os == cc.sys.OS_ANDROID || cc.sys.os == cc.sys.OS_IOS){\n            if(!fs.statSync(path).isFile()){\n                return null;\n            }\n            return this.md5.update(fs.readFileSync(path , \"utf-8\")).digest(\"hex\");\n        }\n        return null;\n    },\n\n    /**\n     * MD5数据\n     */\n    md5Str: function (data) {\n        return this.md5.update(data).digest(\"hex\");\n    },\n\n});\n"]}